# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ PYon Studio –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å

### 1. –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É
- SSH –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É hoster.by
- –õ–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
- –î–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, yoursite.com)

### 2. –ü—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- **Node.js** (–≤–µ—Ä—Å–∏—è 16 –∏–ª–∏ –≤—ã—à–µ)
- **PostgreSQL** (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- **Nginx** (–≤–µ–±-—Å–µ—Ä–≤–µ—Ä)

---

## üîß –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤

### –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `server/`
```
NODE_ENV=production
PORT=3000
DATABASE_URL=postgres://pyon:–≤–∞—à_–ø–∞—Ä–æ–ª—å@localhost:5432/pyon_db
JWT_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞
```

### –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `package.json` –≤ –ø–∞–ø–∫–µ `server/`
```json
{
  "name": "pyon-studio",
  "version": "1.0.0",
  "scripts": {
    "start": "node app.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "pg": "^8.11.3",
    "bcrypt": "^5.1.1",
    "jsonwebtoken": "^9.0.2",
    "csurf": "^1.11.0",
    "express-validator": "^7.0.1",
    "cookie-parser": "^1.4.6",
    "cors": "^2.8.5",
    "multer": "^1.4.5-lts.1",
    "pm2": "^5.3.0"
  }
}
```

---

## üì§ –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ FTP –∫–ª–∏–µ–Ω—Ç (FileZilla)
1. –°–∫–∞—á–∞–π—Ç–µ FileZilla
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:
   - –•–æ—Å—Ç: IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –≤–∞—à –ª–æ–≥–∏–Ω
   - –ü–∞—Ä–æ–ª—å: –≤–∞—à –ø–∞—Ä–æ–ª—å
   - –ü–æ—Ä—Ç: 22 (SSH) –∏–ª–∏ 21 (FTP)
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø–∞–ø–∫—É `/home/–≤–∞—à_–ª–æ–≥–∏–Ω/pyon-studio/`

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ SSH
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh –≤–∞—à_–ª–æ–≥–∏–Ω@IP_–∞–¥—Ä–µ—Å_—Å–µ—Ä–≤–µ—Ä–∞

# –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
mkdir pyon-studio
cd pyon-studio

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ scp –∏–ª–∏ rsync)
```

---

## üóÑÔ∏è –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL
```bash
sudo -u postgres psql
```

### –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```sql
-- –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
CREATE DATABASE pyon_db;

-- –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
CREATE USER pyon WITH PASSWORD '–≤–∞—à_–ø–∞—Ä–æ–ª—å_–¥–ª—è_–±–∞–∑—ã';

-- –î–∞—Ç—å –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
GRANT ALL PRIVILEGES ON DATABASE pyon_db TO pyon;

-- –í—ã–π—Ç–∏
\q
```

### –ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /home/–≤–∞—à_–ª–æ–≥–∏–Ω/pyon-studio

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É
psql -U pyon -d pyon_db -f db/schema.sql
```

---

## üì¶ –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É server
cd /home/–≤–∞—à_–ª–æ–≥–∏–Ω/pyon-studio/server

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
```

---

## üöÄ –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –≤–∞—à —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x manage.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
./manage.sh

# –í—ã–±—Ä–∞—Ç—å –ø—É–Ω–∫—Ç 1 (–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä)
# –ó–∞—Ç–µ–º –≤—ã–±—Ä–∞—Ç—å 2 (PM2 —Ä–µ–∂–∏–º)
```

### –°–ø–æ—Å–æ–± 2: –ù–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ PM2
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ PM2
npx pm2 start ecosystem.config.js --env production

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PM2
npx pm2 save

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
npx pm2 startup
```

---

## üåê –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (Nginx)

### –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
```bash
sudo nano /etc/nginx/sites-available/pyon-studio
```

### –î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª:
```nginx
server {
    listen 80;
    server_name –≤–∞—à_–¥–æ–º–µ–Ω.com www.–≤–∞—à_–¥–æ–º–µ–Ω.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

### –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–∞–π—Ç
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É
sudo ln -s /etc/nginx/sites-available/pyon-studio /etc/nginx/sites-enabled/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Nginx
sudo systemctl reload nginx
```

---

## üîí –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS (SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç)

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Certbot
```bash
sudo apt update
sudo apt install certbot python3-certbot-nginx
```

### –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
```bash
sudo certbot --nginx -d –≤–∞—à_–¥–æ–º–µ–Ω.com -d www.–≤–∞—à_–¥–æ–º–µ–Ω.com
```

---

## ‚úÖ –®–∞–≥ 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å PM2
```bash
npx pm2 status
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
```bash
npx pm2 logs
```

### –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: `https://–≤–∞—à_–¥–æ–º–µ–Ω.com`

---

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–º

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /home/–≤–∞—à_–ª–æ–≥–∏–Ω/pyon-studio/server

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
./manage.sh

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ PM2:
npx pm2 status          # –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
npx pm2 logs            # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
npx pm2 restart pyon-studio  # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
npx pm2 stop pyon-studio     # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
   ```bash
   npx pm2 restart pyon-studio
   ```

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ —Å–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å PM2: `npx pm2 status`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `npx pm2 logs`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx: `sudo systemctl status nginx`

### –ï—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: `psql -U pyon -d pyon_db`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ PostgreSQL

### –ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç:
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3000
sudo lsof -i :3000

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
sudo kill -9 PID_–ø—Ä–æ—Ü–µ—Å—Å–∞
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `npx pm2 logs`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `npx pm2 status`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `npx pm2 restart pyon-studio`

**–í–∞–∂–Ω–æ:** –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!
